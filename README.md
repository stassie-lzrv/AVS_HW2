# АBC ИДЗ №2 
## Лазарева Анастасия БПИ217
### Вариант 6 : Разработать программу, заменяющую все согласные буквы в заданной ASCII-строке их ASCII кодами в десятичной системе счисления.
#### ИДЗ было выполнено согласно критериям на оценку 8, далее подробно по каждому баллу:

#### 4 балла

- Файл 4.c


![img](/img1.png)

- Для получения исполняемого (a.out)  и ассемблер (4.s) файлов вводим в командную строку команды:

$gcc -O0 -Wall -fno-asynchronous-unwind-tables 4.c -o 4

$gcc -O0 -Wall -fno-asynchronous-unwind-tables -S 4.c -o 4.s

$gcc 4.s -o

Лишние макросы были убраны за счёт использования аргументов командной строки.

gcc -masm=intel -fno-asynchronous-unwind-tables -fno-jump-tables -fno-stack-protector -fno-exceptions -S 4.c

Также файл 4.s содержит комментарии

- Все проведенные тесты верны, значит программа работает корректно

![img](/img2.png)

### 5 баллов

- Программа была декомпозирована на функции с передачей параметров (5.c и 5.s)

![img](/img3.png)


char *get_string(int *len, int *test) - функция для ввода строки, где в параментрах передается длина строки (int *len) и test(переменная, показывающая корректность ввода). Функция возвращает указатель на начало введенной строки

void task(char *s, int len) - функция для изменения строки, где в параметрах передается строка (char *s) и длина строки (int len). Функция выводит измененную строку

Также были добавлены комментарии в 5.s

### 6 баллов

- Был произведен рефакторинг кода на ассемблере (файл 6.s)

Для проверки вводим в командную строку команды: 

gcc 6.s

gcc ./a.out

И на всех проведенных тестах, результаты были корректны:

![img](/img4.png)

Размер:

5.s программа полученная после компиляции: 441 lines 7815 B (8 KB на диске)

6.s программа полученная после рефакторинга: 461 lines 7648 B (8 KB на диске)

### 7 баллов

- Код был разделен на 2 файла (функции и main) и соответственно были получены 2 ассемблер файла 6-1.s и 6-2.s 

Повторная проверка на тех же тестах, все тесты прошли корректность:

gcc 6-1.s 6-2.s

gcc ./a.out

- Далее был переделан способ ввода и вывода через командную строку на ввод данных из файла (input.txt) и вывод данных в файл (output.txt). Файл с измененным кодом - 7.c и соответсвующий ему ассемблер файл - 7.s

Также есть проверка ввода и проверка корректного открытия файлов

- Далее с помощью следующих команд, была проведена повторная проверка на тех же тестах (input.txt, input2.txt, input3.txt), все тесты прошли корректность (output.txt, output2.txt, output3.txt):

gcc 7.s

gcc ./a.out input.txt output.txt

### 8 баллов

В программу была добавлена функция генератора случайных строк, а также возможность выбора ввода данных

-r -> get_random_string генерация случайной строки

-h -> help вывод всех ключей с обозначениями

-f -> input.txt output.txt чтение и запись данных в файлы

-s -> ввод из командной строки

Также модификация программы на C и программы на ассемблере, полученной после рефакторинга, для проведения сравнения на производительность.

start = clock()

end = clock()

(double)(end - start) / (CLOCKS_PER_SEC)

Для замедления работы до секунды, был поставлен цикл на 10000 повторов в функции change, больший диапазон генерирования рандомных чисел и количество элементов.
